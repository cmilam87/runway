sys_path: ./
namespace: testlambda
stacker_bucket: "runwaylambdahooktestbucket"

pre_build:
  - upload_docker_src:
      path: runway.cfngin.hooks.aws_lambda.upload_lambda_functions
      required: true
      data_key: lambda
      args:
        functions:
          testlambda:
            dockerizePip: non-linux
            runtime: python3.7
            path: ./fixtures/lambda_src/dockerize_src
            include:
              - '*.py'
            exclude:
              - '*.pyc'
  - upload_nondocker_src:
      path: runway.cfngin.hooks.aws_lambda.upload_lambda_functions
      required: true
      data_key: lambda
      args:
        functions:
          testlambda:
            path: ./fixtures/lambda_src/nondockerize_src
            include:
              - '*.py'
            exclude:
              - '*.pyc'
stacks:
  - name: test-dockerize
    class_path: blueprints.lambda.BlueprintClass
    variables:
      Code: ${hook_data lambda::testlambda}
      AppName: dockerizepip
  - name: test-nondockerize
    class_path: blueprints.lambda.BlueprintClass
    variables:
      Code: ${hook_data lambda::testlambda}
      AppName: nondockerizepip
